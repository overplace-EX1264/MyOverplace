angular.module("starter",["ionic","starter.controllers","starter.services","chat.services","ngCordova","pusher-angular"]).run(["$rootScope","$ionicPlatform","$ionicHistory","$ionicPopup","$cordovaNetwork","$state",function(t,e,i,a,o){e.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleLightContent(),window.MobileAccessibility&&window.MobileAccessibility.usePreferredTextZoom(!1),window.localStorage.network=o.isOnline()?"online":"offline",window.runningBg=0,document.addEventListener("pause",function(){window.runningBg=1},!1),document.addEventListener("resume",function(){window.runningBg=0},!1)}),e.registerBackButtonAction(function(t){var e=(i.viewHistory(),i.currentView()),o=i.backView();if("tab.chat-detail"==e.stateName&&"tab.chat"==o.stateName||"tab.convalide-detail"==e.stateName&&"tab.convalide"==o.stateName||"tab.notifiche-detail"==e.stateName&&"tab.notifiche"==o.stateName)i.goBack();else{var n=a.confirm({title:"Chiusura app",template:"Sei sicuro di voler uscire?",okText:"OK",cancelText:"Annulla"});n.then(function(t){t&&ionic.Platform.exitApp()})}return t.preventDefault(),!1},101)}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html",controller:"TabsCtrl"}).state("tab.notifiche",{url:"/notifiche",views:{"tab-notifiche":{templateUrl:"templates/tab-notifiche.html",controller:"NotificheCtrl"}}}).state("tab.notifiche-detail",{url:"/notifiche/:id",views:{"tab-notifiche":{templateUrl:"templates/notifiche-detail.html",controller:"NotificheDetailCtrl"}}}).state("tab.chat",{url:"/chat",views:{"tab-chat":{templateUrl:"templates/tab-chat.html",controller:"ChatCtrl"}}}).state("tab.chat-detail",{url:"/chat/:channelReference",views:{"tab-chat":{templateUrl:"templates/chat-detail.html",controller:"ChatDetailCtrl"}}}).state("tab.convalide",{url:"/convalide",views:{"tab-convalide":{templateUrl:"templates/tab-convalide.html",controller:"ConvalideCtrl"}}}).state("tab.convalide-detail",{url:"/convalide/:type/:id",views:{"tab-convalide":{templateUrl:"templates/convalide-detail.html",controller:"ConvalideDetailCtrl"}}}).state("tab.impostazioni",{url:"/impostazioni",cache:!1,views:{"tab-impostazioni":{templateUrl:"templates/tab-impostazioni.html",controller:"ImpostazioniCtrl"}}}).state("login",{url:"/login",templateUrl:"templates/login.html",controller:"LoginCtrl"});var i=window.localStorage.getItem("id_scheda"),a=window.localStorage.getItem("regId");null!==i&&null!==a?e.otherwise("/tab/impostazioni"):(window.localStorage.clear(),e.otherwise("/login"))}]).directive("constantfocus",["$timeout","$ionicScrollDelegate",function(t,e){return{restrict:"A",link:function(i,a){a[0].addEventListener("focusout",function(){a[0].focus()}),a[0].addEventListener("focus",function(){function i(a){t(function(){e.scrollBottom()},30),window.removeEventListener(a,i,a)}window.addEventListener("native.keyboardshow",i,"native.keyboardshow"),window.addEventListener("native.keyboardhide",i,"native.keyboardhide")})}}}]).directive("formValidateAfter",function(){function t(t,e,i,a){var o="form-validate";a.validate=!1,e.bind("focus",function(){a.validate&&a.$invalid?(e.addClass(o),t.$apply(function(){a.validate=!0})):(e.removeClass(o),t.$apply(function(){a.validate=!1}))}).bind("blur",function(){e.addClass(o),t.$apply(function(){a.validate=!0})})}return{restrict:"A",require:"ngModel",link:t}});