angular.module("starter",["ionic","starter.controllers","chat.controllers","news.controllers","convalide.controllers","notifiche.controllers","promozioni.controllers","eventi.controllers","coupon.controllers","help.controllers","recensioni.controllers","gallery.controllers","riepilogo.controllers","professional.controllers","rubrica.controllers","starter.services","database.services","chat.services","news.services","convalide.services","notifiche.services","promozioni.services","eventi.services","coupon.services","help.services","recensioni.services","gallery.services","riepilogo.services","professional.services","rubrica.services","starter.directive","starter.filter","ngCordova","pusher-angular","monospaced.elastic","afkl.lazyImage","unsavedChanges","hmac","ionic.wizard","ngIOS9UIWebViewPatch"]).run(["$rootScope","$ionicPlatform","$ionicHistory","$ionicPopup","$ionicLoading","$cordovaNetwork","$cordovaStatusbar","$timeout","$cordovaSplashscreen","$state","$location","Auth","Database",function(e,t,a,l,o,n,r,i,p,s,c,v){var d=["app.chat-read","app.convalide-read","app.notifiche-read","app.news-create","app.news-read","app.news-edit","app.eventi-create","app.eventi-read","app.eventi-edit","app.promozioni-edit","app.coupon-create","app.coupon-read","app.coupon-edit","app.help-detail","app.recensioni-detail","app.riepilogo-read"],m=["app.chat","app.convalide","app.notifiche","app.news","app.news","app.news-read|app.news","app.eventi","app.eventi","app.eventi-read|app.eventi","app.promozioni","app.coupon","app.coupon","app.coupon-read|app.coupon","app.help","app.recensioni","app.riepilogo"];t.ready(function(){r.hide(),i(function(){p.hide()},400),window.MobileAccessibility&&window.MobileAccessibility.usePreferredTextZoom(!1),ionic.Platform.fullScreen(),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.localStorage.network=n.isOnline()?"online":"offline",window.runningBg=0,document.addEventListener("pause",function(){window.runningBg=1,window.database.close()},!1),document.addEventListener("resume",function(){window.runningBg=0,window.database.open();var e=v.getUserData(null);if(null!==e.id_scheda&&null!==e.id_tipologia_versione_app){var t=new Date;if("3"==e.id_tipologia_versione_app&&t.toISOString()>=e.data_scadenza_app||"1"==e.app_scaduta){var n=l.alert({title:"Attenzione",template:"La versione dell'app Ã¨ scaduta!"});n.then(function(){o.show({template:"<ion-spinner></ion-spinner>",noBackdrop:!1});var e=window.localStorage.id_scheda;v.logout().then(function(){v.changeAppVersion(e,"base").then(function(){o.hide(),s.go("login"),a.clearCache(),a.clearHistory()})},function(){o.hide()})})}}},!1)}),t.registerBackButtonAction(function(e){var t=(a.viewHistory(),a.currentView()),o=a.backView(),n=!1,r=d.indexOf(t.stateName);if(-1!==r){var i=m[r];if(-1!=i.indexOf("|")){var p=i.split("|");-1!=p.indexOf(o.stateName)?a.goBack():n=!0}else m[r]==o.stateName?a.goBack():n=!0}else n=!0;if(n){var s=l.confirm({title:"Chiusura app",template:"Sei sicuro di voler uscire?",okText:"OK",cancelText:"Annulla"});s.then(function(e){e&&(window.database.isOpen&&window.database.close(),ionic.Platform.exitApp())})}return e.preventDefault(),!1},101)}]).config(["$stateProvider","$urlRouterProvider","$compileProvider","$ionicConfigProvider","unsavedWarningsConfigProvider","APP_VERSION",function(e,t,a,l,o,n){l.backButton.text("").icon("ion-ios-arrow-back").previousTitleText(!1),a.aHrefSanitizationWhitelist(/^\s*(https?|mailto|file|tel):/),e.state("login",{url:"/login",templateUrl:"templates/login.html",controller:"LoginCtrl"}).state("app",{url:"/app","abstract":!0,templateUrl:"templates/nav_menu.html",controller:"NavMenuCtrl",cache:!1}).state("app.notifiche",{url:"/notifiche",views:{navContent:{templateUrl:"templates/notifiche/list.html",controller:"NotificheCtrl"}}}).state("app.notifiche-read",{url:"/notifiche/:id",views:{navContent:{templateUrl:"templates/notifiche/read.html",controller:"NotificheDetailCtrl"}}}).state("app.chat",{url:"/chat",views:{navContent:{templateUrl:"templates/chat/list.html",controller:"ChatCtrl"}}}).state("app.chat-read",{url:"/chat/:channelReference",views:{navContent:{templateUrl:"templates/chat/read.html",controller:"ChatDetailCtrl"}}}).state("app.convalide",{url:"/convalide",views:{navContent:{templateUrl:"templates/convalide/list.html",controller:"ConvalideCtrl"}},resolve:{initial:["Convalide",function(e){return{list:e.getList(),count:e.getTotalCount()}}]}}).state("app.convalide-read",{url:"/convalide/:type/:id",views:{navContent:{templateUrl:"templates/convalide/read.html",controller:"ConvalideDetailCtrl"}}}).state("app.news",{url:"/news",views:{navContent:{templateUrl:"templates/news/list.html",controller:"NewsCtrl"}}}).state("app.news-read",{url:"/news/{id:[0-9]*}",views:{navContent:{templateUrl:"templates/news/read.html",controller:"NewsDetailCtrl"}}}).state("app.news-create",{url:"/news/create",views:{navContent:{templateUrl:"templates/news/create.html",controller:"NewsOperationCtrl"}}}).state("app.news-edit",{url:"/news/{id:[0-9]*}/edit",views:{navContent:{templateUrl:"templates/news/edit.html",controller:"NewsOperationCtrl"}}}).state("app.eventi",{url:"/eventi",views:{navContent:{templateUrl:"templates/eventi/list.html",controller:"EventiCtrl"}}}).state("app.eventi-read",{url:"/eventi/{id:[0-9]*}",views:{navContent:{templateUrl:"templates/eventi/read.html",controller:"EventiDetailCtrl"}}}).state("app.eventi-create",{url:"/eventi/create",views:{navContent:{templateUrl:"templates/eventi/create.html",controller:"EventiOperationCtrl"}}}).state("app.eventi-edit",{url:"/eventi/{id:[0-9]*}/edit",views:{navContent:{templateUrl:"templates/eventi/edit.html",controller:"EventiOperationCtrl"}}}).state("app.promozioni",{url:"/promozioni",views:{navContent:{templateUrl:"templates/promozioni/list.html",controller:"PromozioniCtrl"}},resolve:{initial:["Promozioni",function(e){return e.getList()}]}}).state("app.promozioni-edit",{url:"/promozioni/{id:[0-9]*}/edit",views:{navContent:{templateUrl:"templates/promozioni/edit.html",controller:"PromozioniOperationCtrl"}}}).state("app.coupon",{url:"/coupon",views:{navContent:{templateUrl:"templates/coupon/list.html",controller:"CouponCtrl"}}}).state("app.coupon-read",{url:"/coupon/{id:[0-9]*}",views:{navContent:{templateUrl:"templates/coupon/read.html",controller:"CouponDetailCtrl"}}}).state("app.coupon-create",{url:"/coupon/create",views:{navContent:{templateUrl:"templates/coupon/wizard.html",controller:"CouponWizardCtrl"}}}).state("app.coupon-edit",{url:"/coupon/{id:[0-9]*}/edit",views:{navContent:{templateUrl:"templates/coupon/edit.html",controller:"CouponOperationCtrl"}}}).state("app.gallery",{url:"/gallery",views:{navContent:{templateUrl:"templates/gallery/gallery.html",controller:"GalleryCtrl"}}}).state("app.help",{url:"/help",views:{navContent:{templateUrl:"templates/help/list.html",controller:"HelpCtrl"}}}).state("app.help-detail",{url:"/help/detail/:id",views:{navContent:{templateUrl:"templates/help/detail.html",controller:"HelpDetailCtrl"}}}).state("app.recensioni",{url:"/recensioni",views:{navContent:{templateUrl:"templates/recensioni/list.html",controller:"recensioniCtrl"}}}).state("app.recensioni-detail",{url:"/recensioni/:id",views:{navContent:{templateUrl:"templates/recensioni/detail.html",controller:"recensioniDetailCtrl"}}}).state("app.riepilogo",{url:"/riepilogo",views:{navContent:{templateUrl:"templates/riepilogo/list.html",controller:"RiepilogoCtrl"}}}).state("app.riepilogo-read",{url:"/riepilogo/:name",views:{navContent:{templateUrl:"templates/riepilogo/read.html",controller:"RiepilogoDetailCtrl"}}}).state("app.contatti",{url:"/contatti",views:{navContent:{templateUrl:"templates/contatti.html",controller:"ContattiCtrl"}}}).state("app.professional",{url:"/professional",views:{navContent:{templateUrl:"templates/professional/read.html",controller:"ProfessionalCtrl"}}}).state("app.rubrica",{url:"/rubrica",views:{navContent:{templateUrl:"templates/rubrica/list.html",controller:"RubricaCtrl"}}}).state("app.home",{url:"/home",views:{navContent:{templateUrl:"templates/home.html",controller:"HomeCtrl"}}}),o.logEnabled=!1,o.useTranslateService=!1,o.routeEvent=["$stateChangeStart"],o.navigateMessage="I dati non salvati andranno persi. Continuare?";var r=window.localStorage.getItem("APP_VERSION");if(null==r||n>r)window.localStorage.clear(),t.otherwise("/login");else{var i=window.localStorage.getItem("id_scheda"),p=window.localStorage.getItem("regId");null!==i&&null!==p?t.otherwise("/app/home"):(window.localStorage.clear(),t.otherwise("/login"))}}]);