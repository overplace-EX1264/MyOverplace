angular.module("starter.directive",[]).directive("formValidateAfter",function(){function t(t,e,i,a){var o="form-validate";a.validate=!1,e.bind("focus",function(){a.validate&&a.$invalid?(e.addClass(o),t.$apply(function(){a.validate=!0})):(e.removeClass(o),t.$apply(function(){a.validate=!1}))}).bind("blur",function(){e.addClass(o),t.$apply(function(){a.validate=!0})})}return{restrict:"A",require:"ngModel",link:t}}).directive("socialCheckbox",["$ionicPopup",function(t){return{restrict:"E",scope:{soc:"=socialAssign",obj:"=controllerAssign",hideFacebook:"=?",disableFacebook:"=?",hideAlertTwitter:"=?",disableTwitter:"=?"},link:function(e){e.warned={facebook:!1,twitter:!1},e.alertSocial=function(i){var a;switch(i){case"facebook":a=void 0!=typeof e.disableFacebook&&1==e.disableFacebook?"Il coupon non pu&ograve; essere pubblicato su facebook finch&egrave; non sar&agrave; validato":"Facebook non configurato";break;case"twitter":a=void 0!=typeof e.disableTwitter&&1==e.disableTwitter?"Il coupon non pu&ograve; essere pubblicato su twitter finch&egrave; non sar&agrave; validato":"Twitter non configurato";break;default:a="Facebook e Twitter non configurati"}t.alert({title:"Attenzione",template:a}).then(function(){switch(i){case"facebook":e.warned.facebook=!0;break;case"twitter":e.warned.twitter=!0}})},e.alertTwitter=function(){1!=e.hideAlertTwitter&&e.obj.twitter&&t.show({title:"Attenzione",template:"La pubblicazione su Twitter avverr&agrave; immediatamente. Non &egrave; possibile impostare una pubblicazione differita",scope:e,buttons:[{text:"Annulla",onTap:function(){e.obj.twitter=!1}},{text:"Ok",type:"button-positive",onTap:function(){e.obj.twitter=!0}}]})}},templateUrl:"templates/directive/social_checkbox.html"}}]).directive("notificheCheckbox",["$ionicPopup","$ionicLoading","$cordovaToast","ListeContatti",function(t,e,i,a){return{restrict:"E",scope:{ableMessage:"=notificheMessaggi",statusCheckbox:"=statusCheckbox",obj:"=controllerAssign"},link:function(o){o.warned={sms:!1,email:!1},o.emptyListaContatti=[],o.getContactList=function(n){o.statusCheckbox[n]?(e.show({template:"<ion-spinner></ion-spinner>",noBackdrop:!1}),a.getByType(n).then(function(i){o.obj["id_lista_"+n]=0,e.hide();var a='<div class="list">';for(var r in i.liste_contatti)a+='<label class="item item-radio"><input type="radio" name="id_lista_'+n+'" ng-model="obj.id_lista_'+n+'" value="'+i.liste_contatti[r].id+'"><div class="item-content">('+i.liste_contatti[r].numero_contatti+") "+i.liste_contatti[r].titolo+'</div><i class="radio-icon ion-checkmark calm"></i></label>';a+="</div>",t.show({title:"Scegli una lista contatti",template:a,subTitle:"per l&apos;invio della tua campagna "+n,scope:o,buttons:[{text:"Annulla",onTap:function(){o.statusCheckbox[n]=!1,delete o.obj["id_lista_"+n]}},{text:"Conferma",type:"button-positive",onTap:function(t){("email"==n&&(null==o.obj.id_lista_email||0==o.obj.id_lista_email)||"sms"==n&&(null==o.obj.id_lista_sms||0==o.obj.id_lista_sms))&&t.preventDefault()}}]})},function(t){e.hide(),o.emptyListaContatti[n+"_disabled"]=!0,null!==t&&"string"==typeof t?i.show(t,"short","bottom"):i.show("Errore nel recupero delle liste contatti","short","bottom")})):delete o.obj["id_lista_"+n]},o.alertMessage=function(e,i,a){t.alert({title:e,template:i}).then(function(){switch(a){case"sms":o.warned.sms=!0;break;case"email":o.warned.email=!0}})}},templateUrl:function(t,e){return"templates/directive/notifiche_checkbox_"+e.mode+".html"}}}]).directive("customMaxlength",function(){return{restrict:"A",require:"ngModel",link:function(t,e,i,a){i.$set("ngTrim","false");var o=parseInt(i.customMaxlength,10);a.$parsers.push(function(t){return t.length>o&&(t=t.substr(0,o),a.$setViewValue(t),a.$render()),t})}}}).directive("checkAvatar",function(){"use strict";return{restrict:"A",link:function(t,e,i){return i.$observe("afklLazyImageLoaded",function(t){"fail"==t&&e[0].firstChild.setAttribute("src","http://www.overplace.com/avatar/ovp/avatar_default.png")})}}});